<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Crypto Sentinel Pro - Dashboard de sentiment crypto avec Fear & Greed Index">
  <meta name="theme-color" content="#0a1628">
  <title>Crypto Sentinel Pro</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #0a1628; }
    ::-webkit-scrollbar-thumb { background: #1e3a5f; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #2a4a6f; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    // ========== CONFIGURATION ==========
    const CONFIG = { REFRESH_RATE: 5000 };

    // ========== CLASSIFICATIONS ==========
    const getFearGreedClass = (v) => {
      if (v <= 24) return { label: 'Extreme Fear', color: '#ea3943', bg: 'rgba(234,57,67,0.15)', emoji: 'üò±', desc: 'Capitulation - Opportunit√© contrarian' };
      if (v <= 44) return { label: 'Fear', color: '#ea8c00', bg: 'rgba(234,140,0,0.15)', emoji: 'üò∞', desc: 'Sentiment n√©gatif' };
      if (v <= 55) return { label: 'Neutral', color: '#c9b003', bg: 'rgba(201,176,3,0.15)', emoji: 'üòê', desc: 'March√© ind√©cis' };
      if (v <= 74) return { label: 'Greed', color: '#93d900', bg: 'rgba(147,217,0,0.15)', emoji: 'üòä', desc: 'Optimisme - FOMO' };
      return { label: 'Extreme Greed', color: '#16c784', bg: 'rgba(22,199,132,0.15)', emoji: 'ü§ë', desc: 'Euphorie - Correction probable' };
    };

    const getOppClass = (v) => {
      if (v <= 20) return { label: '√âVITER', color: '#ea3943', emoji: 'üö´', desc: 'Conditions d√©favorables' };
      if (v <= 40) return { label: 'PRUDENCE', color: '#ea8c00', emoji: '‚ö†Ô∏è', desc: 'Attendre' };
      if (v <= 60) return { label: 'NEUTRE', color: '#c9b003', emoji: 'üòê', desc: 'Conditions moyennes' };
      if (v <= 80) return { label: 'FAVORABLE', color: '#93d900', emoji: '‚úÖ', desc: 'Bonnes conditions' };
      return { label: 'EXCELLENT', color: '#16c784', emoji: 'üéØ', desc: 'Optimal' };
    };

    const getSentimentStyle = (v) => {
      if (v <= 30) return { color: '#ea3943', label: 'BEARISH' };
      if (v <= 50) return { color: '#ea8c00', label: 'NEUTRE' };
      if (v <= 70) return { color: '#93d900', label: 'BULLISH' };
      return { color: '#16c784', label: 'V.BULLISH' };
    };

    // ========== DATA GENERATORS ==========
    const genFearGreedHistory = () => {
      const data = []; let v = 50;
      for (let i = 730; i >= 0; i--) {
        const t = Date.now() - i * 86400000;
        v = Math.max(5, Math.min(95, v * 0.95 + (50 + Math.sin(i/60)*20 + (Math.random()-0.5)*15) * 0.05));
        data.push({ ts: Math.floor(t/1000), value: Math.round(v), date: new Date(t).toISOString().split('T')[0] });
      }
      [26,28,25,27,30,32,35].forEach((val,i) => data[data.length-1-i].value = val);
      return data;
    };

    const genBtcHistory = (fg) => fg.map(f => ({ ts: f.ts, price: Math.max(20000, Math.min(150000, 60000 + (f.value-50)*800 + (Math.random()-0.5)*5000)) }));

    const genTop50 = () => {
      const base = [
        { id:1, sym:'BTC', name:'Bitcoin', icon:'‚Çø', price:97845, c24:2.34, c7:5.67, c30:12.45, sent:72, sentP:65, sH:[58,62,65,68,72], flow:-1.2, vsBtc:0 },
        { id:2, sym:'ETH', name:'Ethereum', icon:'Œû', price:3456, c24:1.87, c7:4.23, c30:8.91, sent:68, sentP:62, sH:[55,58,60,64,68], flow:-0.8, vsBtc:-2.3 },
        { id:3, sym:'BNB', name:'BNB', icon:'‚óá', price:612, c24:-0.54, c7:2.11, c30:5.34, sent:55, sentP:58, sH:[60,58,56,55,55], flow:0.5, vsBtc:-4.2 },
        { id:4, sym:'SOL', name:'Solana', icon:'‚óé', price:198, c24:4.21, c7:8.45, c30:22.3, sent:81, sentP:72, sH:[65,70,74,78,81], flow:-2.1, vsBtc:8.5 },
        { id:5, sym:'XRP', name:'XRP', icon:'‚úï', price:2.34, c24:-1.23, c7:3.45, c30:15.67, sent:48, sentP:52, sH:[55,53,51,50,48], flow:1.8, vsBtc:-6.1 },
        { id:6, sym:'ADA', name:'Cardano', icon:'‚Ç≥', price:0.89, c24:0.67, c7:2.34, c30:6.78, sent:52, sentP:48, sH:[45,46,48,50,52], flow:0.3, vsBtc:1.2 },
        { id:7, sym:'DOGE', name:'Dogecoin', icon:'√ê', price:0.32, c24:3.45, c7:12.34, c30:25.67, sent:65, sentP:58, sH:[50,54,58,62,65], flow:-0.5, vsBtc:5.8 },
        { id:8, sym:'AVAX', name:'Avalanche', icon:'‚ñ≤', price:38.5, c24:2.12, c7:5.67, c30:11.23, sent:61, sentP:55, sH:[48,51,54,58,61], flow:-0.9, vsBtc:3.2 },
        { id:9, sym:'DOT', name:'Polkadot', icon:'‚óè', price:7.23, c24:-0.89, c7:1.23, c30:3.45, sent:45, sentP:50, sH:[54,52,50,48,45], flow:0.7, vsBtc:-5.3 },
        { id:10, sym:'LINK', name:'Chainlink', icon:'‚¨°', price:18.9, c24:1.56, c7:4.56, c30:9.87, sent:67, sentP:60, sH:[52,55,58,63,67], flow:-1.1, vsBtc:4.1 },
        { id:11, sym:'MATIC', name:'Polygon', icon:'‚¨¢', price:0.54, c24:-2.34, c7:-1.23, c30:-5.67, sent:38, sentP:52, sH:[58,52,46,42,38], flow:1.5, vsBtc:-12.4 },
        { id:12, sym:'SHIB', name:'Shiba Inu', icon:'üêï', price:0.000024, c24:5.67, c7:15.34, c30:28.9, sent:62, sentP:50, sH:[42,48,52,58,62], flow:-0.4, vsBtc:9.2 },
        { id:13, sym:'UNI', name:'Uniswap', icon:'ü¶Ñ', price:12.4, c24:0.98, c7:3.21, c30:7.65, sent:54, sentP:51, sH:[48,49,50,52,54], flow:0.1, vsBtc:0.5 },
        { id:14, sym:'ATOM', name:'Cosmos', icon:'‚öõ', price:9.87, c24:-1.45, c7:0.89, c30:2.34, sent:46, sentP:50, sH:[52,50,49,48,46], flow:0.6, vsBtc:-3.8 },
        { id:15, sym:'LTC', name:'Litecoin', icon:'≈Å', price:98.5, c24:0.23, c7:2.45, c30:5.67, sent:51, sentP:49, sH:[47,48,48,50,51], flow:0.2, vsBtc:0.8 },
        { id:16, sym:'NEAR', name:'NEAR', icon:'‚ìÉ', price:5.67, c24:3.21, c7:7.89, c30:14.56, sent:66, sentP:56, sH:[48,52,56,62,66], flow:-0.9, vsBtc:6.3 },
        { id:17, sym:'APT', name:'Aptos', icon:'‚óà', price:9.12, c24:-0.67, c7:1.89, c30:4.56, sent:44, sentP:50, sH:[54,52,50,47,44], flow:0.8, vsBtc:-4.1 },
        { id:18, sym:'ARB', name:'Arbitrum', icon:'üî∑', price:1.23, c24:2.89, c7:6.78, c30:12.34, sent:62, sentP:54, sH:[46,50,54,58,62], flow:-0.5, vsBtc:4.5 },
        { id:19, sym:'OP', name:'Optimism', icon:'üî¥', price:2.45, c24:1.78, c7:5.43, c30:10.21, sent:58, sentP:53, sH:[48,50,52,55,58], flow:-0.3, vsBtc:2.8 },
        { id:20, sym:'INJ', name:'Injective', icon:'üíâ', price:24.3, c24:4.56, c7:9.87, c30:18.76, sent:74, sentP:64, sH:[56,60,64,70,74], flow:-1.6, vsBtc:7.8 },
      ];
      const extra = ['FIL','IMX','RENDER','SUI','TIA','STX','SEI','FET','PEPE','WIF','AAVE','GRT','MKR','XLM','ALGO','HBAR','VET','ICP','RUNE','SAND','MANA','AXS','FLOW','THETA','EOS','XTZ','EGLD','GALA','ENJ','CRV'];
      const names = ['Filecoin','Immutable','Render','Sui','Celestia','Stacks','Sei','Fetch.ai','Pepe','dogwifhat','Aave','The Graph','Maker','Stellar','Algorand','Hedera','VeChain','ICP','THORChain','Sandbox','Decentraland','Axie','Flow','Theta','EOS','Tezos','MultiversX','Gala','Enjin','Curve'];
      const icons = ['üìÅ','üéÆ','üé®','üíß','üåå','üìö','üåä','ü§ñ','üê∏','üé©','üëª','üìä','üèõÔ∏è','‚ú®','üî∫','‚Ñè','‚úì','‚àû','‚ö°','üèñÔ∏è','üåê','üéÆ','üåä','Œ∏','‚óâ','Íú©','‚¨°','üé™','üéØ','üìà'];
      for (let i=0; i<30; i++) {
        base.push({
          id:21+i, sym:extra[i], name:names[i], icon:icons[i],
          price:[5.89,2.15,8.76,3.45,12.3,2.34,0.56,2.12,0.000012,2.87,267,0.23,1890,0.12,0.21,0.089,0.034,12.4,5.67,0.45,0.52,7.89,0.78,1.89,0.82,1.12,42.3,0.045,0.34,0.89][i],
          c24:[-1.23,2.34,3.45,5.67,2.89,1.23,3.21,4.32,6.78,5.43,1.89,2.34,0.98,1.45,0.89,2.12,1.67,-0.56,2.89,1.23,0.78,1.56,2.34,1.12,0.67,0.89,1.78,3.45,2.12,1.89][i],
          c7:[2.34,5.67,8.9,12.34,7.65,4.56,8.76,11.23,18.9,14.32,5.43,6.78,3.21,4.32,2.67,5.89,4.56,1.89,7.65,3.45,2.34,4.32,5.67,3.45,2.12,2.67,4.89,8.9,5.43,4.56][i],
          c30:[5.67,11.23,16.78,24.56,15.43,9.87,17.65,23.45,35.67,28.76,12.34,13.45,7.65,9.87,5.43,11.23,8.9,4.32,14.32,7.89,5.67,9.12,11.23,7.89,4.56,5.89,10.23,17.65,11.23,9.12][i],
          sent:[44,58,70,76,68,56,64,72,65,70,66,58,52,50,46,56,54,42,63,48,46,52,57,50,42,46,55,61,54,56][i],
          sentP:[48,52,62,66,60,52,56,64,54,60,60,52,50,48,48,50,50,46,56,46,44,50,52,48,44,44,50,54,50,52][i],
          sH:[[50,48,46,45,44],[50,52,54,56,58],[58,62,65,68,70],[62,66,70,74,76],[56,60,62,66,68],[50,52,53,55,56],[52,56,58,62,64],[60,64,66,70,72],[48,54,58,62,65],[56,60,64,68,70],[56,58,60,64,66],[50,52,54,56,58],[50,50,51,51,52],[47,48,48,50,50],[50,48,47,46,46],[48,50,52,54,56],[48,50,51,53,54],[48,46,44,43,42],[52,55,58,60,63],[44,45,46,47,48],[43,44,45,45,46],[48,49,50,51,52],[50,52,54,55,57],[47,48,49,49,50],[46,44,43,43,42],[44,44,45,45,46],[48,50,52,54,55],[50,54,56,58,61],[48,50,51,53,54],[50,52,53,55,56]][i],
          flow:[0.9,-0.7,-1.3,-1.9,-1.0,-0.4,-0.8,-1.5,-0.6,-1.2,-0.9,-0.5,0.2,0.3,0.6,-0.4,-0.3,1.0,-0.8,0.4,0.5,0.2,-0.5,0.3,0.7,0.4,-0.3,-0.7,-0.4,-0.5][i],
          vsBtc:[-3.2,3.5,6.2,10.2,5.8,2.1,5.4,8.9,12.3,11.5,4.2,3.1,0.8,1.2,-2.3,3.4,1.8,-4.5,5.1,0.6,0.3,1.5,2.8,0.9,-3.1,0.2,2.4,6.8,2.2,2.6][i]
        });
      }
      return base;
    };

    // ========== COMPONENTS ==========
    const FearGreedIndex = ({ value, history, btcHistory }) => {
      const [range, setRange] = useState('1y');
      const c = getFearGreedClass(value);
      const yesterday = history[history.length-2]?.value || 0;
      const lastWeek = history[history.length-8]?.value || 0;
      const lastMonth = history[history.length-31]?.value || 0;
      const yearData = history.slice(-365);
      const yHigh = Math.max(...yearData.map(d=>d.value));
      const yLow = Math.min(...yearData.map(d=>d.value));
      const filtered = range==='30d' ? history.slice(-30) : range==='1y' ? history.slice(-365) : history;
      const filteredBtc = range==='30d' ? btcHistory.slice(-30) : range==='1y' ? btcHistory.slice(-365) : btcHistory;

      return (
        <div className="bg-[#0f2744] rounded-2xl border border-[#1e3a5f] overflow-hidden">
          <div className="grid grid-cols-1 lg:grid-cols-3">
            <div className="p-6 border-b lg:border-b-0 lg:border-r border-[#1e3a5f]">
              <h3 className="text-lg font-bold text-white mb-1">CMC Crypto Fear and Greed Index</h3>
              <p className="text-xs text-gray-500 mb-4">Source: Alternative.me / CoinMarketCap</p>
              <div className="flex justify-center mb-4">
                <svg width="200" height="120" viewBox="0 0 200 120">
                  <defs><linearGradient id="fgArc" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stopColor="#ea3943"/><stop offset="25%" stopColor="#ea8c00"/><stop offset="50%" stopColor="#c9b003"/><stop offset="75%" stopColor="#93d900"/><stop offset="100%" stopColor="#16c784"/></linearGradient></defs>
                  <path d="M 20 100 A 80 80 0 0 1 180 100" fill="none" stroke="#1e3a5f" strokeWidth="16" strokeLinecap="round"/>
                  <path d="M 20 100 A 80 80 0 0 1 180 100" fill="none" stroke="url(#fgArc)" strokeWidth="16" strokeLinecap="round"/>
                  <g style={{transform:`rotate(${-90+(value/100)*180}deg)`,transformOrigin:'100px 100px',transition:'transform 1s ease-out'}}>
                    <line x1="100" y1="100" x2="100" y2="35" stroke={c.color} strokeWidth="3" strokeLinecap="round"/>
                    <circle cx="100" cy="100" r="8" fill={c.color}/><circle cx="100" cy="100" r="4" fill="#0f2744"/>
                  </g>
                  <text x="100" y="85" textAnchor="middle" fill={c.color} fontSize="36" fontWeight="bold">{value}</text>
                </svg>
              </div>
              <div className="text-center mb-6">
                <div className="flex items-center justify-center gap-2 mb-1"><span className="text-3xl">{c.emoji}</span><span className="text-xl font-bold" style={{color:c.color}}>{c.label}</span></div>
                <p className="text-xs text-gray-400">{c.desc}</p>
              </div>
              <div className="space-y-2 mb-4">
                <h4 className="text-sm font-semibold text-gray-300">Historical Values</h4>
                {[{l:'Yesterday',v:yesterday},{l:'Last Week',v:lastWeek},{l:'Last Month',v:lastMonth}].map((x,i)=>{const cl=getFearGreedClass(x.v);return(
                  <div key={i} className="flex items-center justify-between"><span className="text-sm text-gray-400">{x.l}</span><span className="px-3 py-1 rounded-full text-xs font-semibold" style={{backgroundColor:cl.bg,color:cl.color}}>{cl.label} - {x.v}</span></div>
                );})}
              </div>
              <div className="space-y-2 pt-4 border-t border-[#1e3a5f]">
                <h4 className="text-sm font-semibold text-gray-300">Yearly High / Low</h4>
                <div className="flex items-center justify-between"><span className="text-xs text-gray-500">High</span><span className="px-3 py-1 rounded-full text-xs font-semibold" style={{backgroundColor:getFearGreedClass(yHigh).bg,color:getFearGreedClass(yHigh).color}}>{getFearGreedClass(yHigh).label} - {yHigh}</span></div>
                <div className="flex items-center justify-between"><span className="text-xs text-gray-500">Low</span><span className="px-3 py-1 rounded-full text-xs font-semibold" style={{backgroundColor:getFearGreedClass(yLow).bg,color:getFearGreedClass(yLow).color}}>{getFearGreedClass(yLow).label} - {yLow}</span></div>
              </div>
            </div>
            <div className="lg:col-span-2 p-6">
              <div className="flex items-center justify-between mb-4">
                <div><h3 className="text-lg font-bold text-white">Fear and Greed Index Chart</h3><div className="flex items-center gap-4 mt-2 text-xs"><div className="flex items-center gap-1"><span className="w-3 h-0.5 bg-orange-500 rounded"></span><span className="text-gray-400">Fear & Greed</span></div><div className="flex items-center gap-1"><span className="w-3 h-0.5 bg-gray-500 rounded"></span><span className="text-gray-400">BTC Price</span></div></div></div>
                <div className="flex gap-1 bg-[#1e3a5f] rounded-lg p-1">{['30d','1y','All'].map(r=>(<button key={r} onClick={()=>setRange(r)} className={`px-3 py-1 rounded text-xs font-semibold transition-all ${range===r?'bg-blue-600 text-white':'text-gray-400 hover:text-white'}`}>{r}</button>))}</div>
              </div>
              <div className="relative h-72 bg-[#0a1628] rounded-xl overflow-hidden">
                <div className="absolute inset-0 flex flex-col"><div className="flex-1 bg-[#16c784]/5 border-b border-[#16c784]/20"></div><div className="flex-1 bg-[#93d900]/5 border-b border-[#93d900]/20"></div><div className="flex-1 bg-[#c9b003]/5 border-b border-[#c9b003]/20"></div><div className="flex-1 bg-[#ea8c00]/5 border-b border-[#ea8c00]/20"></div><div className="flex-1 bg-[#ea3943]/5"></div></div>
                <div className="absolute right-2 top-0 bottom-0 flex flex-col justify-between py-2 text-[10px] text-gray-500 z-10"><span>100</span><span className="text-[#16c784]">Extreme Greed</span><span className="text-[#93d900]">Greed</span><span className="text-[#c9b003]">Neutral</span><span className="text-[#ea8c00]">Fear</span><span className="text-[#ea3943]">Extreme Fear</span><span>0</span></div>
                <svg className="absolute inset-0 w-full h-full" preserveAspectRatio="none" viewBox="0 0 100 100">
                  {[20,40,55,74].map(y=>(<line key={y} x1="0" y1={100-y} x2="95" y2={100-y} stroke="rgba(255,255,255,0.05)" strokeWidth="0.2"/>))}
                  {filtered.map((p,i)=>{if(i===0)return null;const pr=filtered[i-1];const x1=((i-1)/(filtered.length-1))*92;const x2=(i/(filtered.length-1))*92;const y1=100-pr.value;const y2=100-p.value;return<line key={i} x1={x1} y1={y1} x2={x2} y2={y2} stroke={getFearGreedClass((p.value+pr.value)/2).color} strokeWidth="0.4"/>;})}
                  {filteredBtc.length>0&&<path d={filteredBtc.map((p,i)=>{const x=(i/(filteredBtc.length-1))*92;const y=100-((p.price-20000)/(150000-20000))*100;return`${i===0?'M':'L'} ${x},${Math.max(0,Math.min(100,y))}`;}).join(' ')} fill="none" stroke="rgba(156,163,175,0.4)" strokeWidth="0.3"/>}
                </svg>
                <div className="absolute right-16 px-2 py-1 rounded text-xs font-bold z-20" style={{top:`${100-value}%`,backgroundColor:c.color,color:'#000',transform:'translateY(-50%)'}}>{value}</div>
              </div>
              <div className="flex justify-between mt-2 text-[10px] text-gray-500 pr-16">{range==='30d'?<><span>30d ago</span><span>20d</span><span>10d</span><span>Today</span></>:range==='1y'?<><span>Feb 2025</span><span>May</span><span>Aug</span><span>Nov</span><span>Feb 2026</span></>:<><span>Feb 2024</span><span>Aug</span><span>Feb 2025</span><span>Aug</span><span>Feb 2026</span></>}</div>
              <div className="mt-4 p-3 bg-[#1e3a5f] rounded-lg"><p className="text-xs text-gray-400"><strong className="text-gray-300">Tip:</strong> "Be fearful when others are greedy, and greedy when others are fearful." - Warren Buffett</p></div>
            </div>
          </div>
        </div>
      );
    };

    const OpportunityIndex = ({ score, prevScore, indicators, showDetails, setShowDetails }) => {
      const [anim, setAnim] = useState(0);
      useEffect(()=>{setTimeout(()=>setAnim(score),100);},[score]);
      const c = getOppClass(anim);
      const change = score - prevScore;
      return (
        <div className="bg-[#0f2744] rounded-2xl border border-[#1e3a5f] p-6">
          <div className="flex items-center justify-between mb-4">
            <div><div className="flex items-center gap-2"><span className="text-2xl">üéØ</span><h2 className="text-xl font-bold text-white">Indice d'Opportunit√©</h2></div><p className="text-xs text-gray-500 mt-1">5 facteurs fondamentaux</p></div>
            <button onClick={()=>setShowDetails(!showDetails)} className="px-4 py-2 bg-blue-600/20 border border-blue-600/50 rounded-xl text-blue-400 text-sm font-semibold hover:bg-blue-600/30">{showDetails?'MASQUER':'D√âTAILS'} üìä</button>
          </div>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div className="flex flex-col items-center">
              <svg width="280" height="160" viewBox="0 0 280 160">
                <defs><linearGradient id="oppG" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stopColor="#ea3943"/><stop offset="25%" stopColor="#ea8c00"/><stop offset="50%" stopColor="#c9b003"/><stop offset="75%" stopColor="#93d900"/><stop offset="100%" stopColor="#16c784"/></linearGradient></defs>
                <path d="M 25 140 A 115 115 0 0 1 255 140" fill="none" stroke="#1e3a5f" strokeWidth="18" strokeLinecap="round"/>
                <path d="M 25 140 A 115 115 0 0 1 255 140" fill="none" stroke="url(#oppG)" strokeWidth="18" strokeLinecap="round"/>
                <g style={{transform:`rotate(${-90+(prevScore/100)*180}deg)`,transformOrigin:'140px 140px'}}><line x1="140" y1="140" x2="140" y2="40" stroke="rgba(255,255,255,0.3)" strokeWidth="2" strokeDasharray="4 4"/></g>
                <g style={{transform:`rotate(${-90+(anim/100)*180}deg)`,transformOrigin:'140px 140px',transition:'transform 1.5s ease-out'}}><polygon points="140,35 135,140 145,140" fill={c.color}/><circle cx="140" cy="140" r="10" fill={c.color}/><circle cx="140" cy="140" r="5" fill="#0f2744"/></g>
                <text x="140" y="120" textAnchor="middle" fill={c.color} fontSize="42" fontWeight="bold">{Math.round(anim)}</text>
                <text x="20" y="155" fill="#ea3943" fontSize="10" fontWeight="bold">0</text><text x="250" y="155" fill="#16c784" fontSize="10" fontWeight="bold">100</text>
              </svg>
              <div className="text-center mt-2">
                <div className="flex items-center justify-center gap-2"><span className="text-3xl">{c.emoji}</span><span className="text-2xl font-bold" style={{color:c.color}}>{c.label}</span></div>
                <p className="text-sm text-gray-400 mt-1">{c.desc}</p>
                <div className="flex items-center justify-center gap-4 mt-3">
                  <div className="px-3 py-1 bg-[#1e3a5f] rounded-lg"><div className="text-[10px] text-gray-500">vs 30j</div><div className={`text-lg font-bold ${change>=0?'text-emerald-400':'text-red-400'}`}>{change>=0?'‚Üë':'‚Üì'} {Math.abs(change)}</div></div>
                  <div className="px-3 py-1 bg-[#1e3a5f] rounded-lg"><div className="text-[10px] text-gray-500">Pass√©</div><div className="text-lg font-bold text-gray-300">{prevScore}</div></div>
                </div>
              </div>
            </div>
            <div>
              <h3 className="text-sm font-semibold text-gray-300 mb-3">D√©composition</h3>
              <div className="space-y-3">{indicators.map((ind,i)=>{const pos=ind.current>ind.past;return(
                <div key={i} className="bg-[#1e3a5f] rounded-lg p-3">
                  <div className="flex items-center justify-between mb-2"><span className="text-sm text-gray-300">{ind.name}</span><div className="flex items-center gap-2"><span className="text-xs text-gray-500">{ind.weight}%</span><span className={`text-sm font-bold ${pos?'text-emerald-400':'text-red-400'}`}>{ind.current}</span></div></div>
                  <div className="relative h-2 bg-[#0f2744] rounded-full overflow-hidden"><div className="absolute h-full w-0.5 bg-white/30 z-10" style={{left:`${ind.past}%`}}/><div className="absolute h-full rounded-full transition-all duration-1000" style={{width:`${ind.current}%`,backgroundColor:pos?'#22c55e':'#ef4444'}}/></div>
                  <div className="flex justify-between mt-1 text-[10px]"><span className="text-gray-600">Pass√©: {ind.past}</span><span className={pos?'text-emerald-400':'text-red-400'}>{pos?'+':''}{ind.current-ind.past}</span></div>
                </div>
              );})}</div>
            </div>
          </div>
          {showDetails&&<div className="mt-6 pt-6 border-t border-[#1e3a5f]"><h3 className="text-lg font-bold text-white mb-4">üìö M√©thodologie</h3><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">{[{n:'USDT Flow',w:'20%',c:'#3b82f6',i:['Ratio < 0.90 ‚Üí 80-100','Ratio > 1.15 ‚Üí 0-25']},{n:'Market Cap',w:'25%',c:'#22c55e',i:['> 95% ATH ‚Üí 85-100','< 40% ATH ‚Üí 0-25']},{n:'Institutionnel',w:'25%',c:'#eab308',i:['MSTR avg: $42,500','BTC > $90K ‚Üí 85-100']},{n:'Gold/BTC',w:'15%',c:'#f97316',i:['Ratio ‚Üì > 15% ‚Üí 80-100','Ratio ‚Üë > 15% ‚Üí 0-20']},{n:'Social',w:'15%',c:'#a855f7',i:['‚ö†Ô∏è CONTRARIAN!','> 80% ‚Üí TOP?']}].map((f,i)=>(<div key={i} className="bg-[#1e3a5f] rounded-xl p-4 border-l-4" style={{borderColor:f.c}}><div className="flex items-center justify-between mb-2"><span className="font-semibold text-white">{f.n}</span><span className="text-xs px-2 py-0.5 rounded" style={{backgroundColor:`${f.c}20`,color:f.c}}>{f.w}</span></div><ul className="text-xs text-gray-400 space-y-1">{f.i.map((x,j)=><li key={j}>{x}</li>)}</ul></div>))}</div></div>}
        </div>
      );
    };

    const CryptoCard = ({ crypto: cr, rank }) => {
      const [exp, setExp] = useState(false);
      const st = getSentimentStyle(cr.sent);
      const ch = cr.sent - cr.sentP;
      return (
        <div className="bg-[#0f2744] rounded-xl p-4 border border-[#1e3a5f] hover:border-[#2a4a6f] transition-all cursor-pointer" onClick={()=>setExp(!exp)}>
          <div className="flex items-center justify-between mb-3">
            <div className="flex items-center gap-2"><span className="text-xs text-gray-600 w-6">#{rank}</span><span className="text-lg">{cr.icon}</span><div><div className="font-semibold text-white text-sm">{cr.sym}</div><div className="text-[10px] text-gray-500">{cr.name}</div></div></div>
            <div className="text-right"><div className="text-white text-sm font-mono">${cr.price<1?cr.price.toFixed(4):cr.price.toLocaleString()}</div><div className={`text-xs font-semibold ${cr.c24>=0?'text-emerald-400':'text-red-400'}`}>{cr.c24>=0?'+':''}{cr.c24.toFixed(2)}%</div></div>
          </div>
          <div className="mb-2">
            <div className="flex items-center justify-between text-xs mb-1"><span className="text-gray-500">Sentiment</span><span className="font-semibold" style={{color:st.color}}>{st.label} ({cr.sent}/100)</span></div>
            <div className="relative h-2 bg-[#1e3a5f] rounded-full overflow-hidden"><div className="absolute h-full w-0.5 bg-white/30" style={{left:`${cr.sentP}%`}}/><div className="absolute h-full rounded-full" style={{width:`${cr.sent}%`,backgroundColor:st.color}}/></div>
            <div className="flex justify-between text-[10px] mt-1"><span className="text-gray-600">Pass√©: {cr.sentP}</span><span className={ch>=0?'text-emerald-400':'text-red-400'}>{ch>=0?'‚Üë':'‚Üì'} {Math.abs(ch)}</span></div>
          </div>
          <div className="flex items-center justify-between text-xs px-2 py-1.5 bg-[#1e3a5f] rounded-lg"><span className="text-gray-500">Exchange Flow</span><span className={`font-semibold ${cr.flow<=0?'text-emerald-400':'text-red-400'}`}>{cr.flow<=0?'‚Üì Accum.':'‚Üë Distrib.'} ({cr.flow}%)</span></div>
          {exp&&<div className="mt-3 pt-3 border-t border-[#1e3a5f] space-y-2">
            <div className="grid grid-cols-4 gap-2 text-center">{[{l:'24H',v:cr.c24},{l:'7J',v:cr.c7},{l:'30J',v:cr.c30},{l:'vs BTC',v:cr.vsBtc}].map((x,i)=>(<div key={i} className="bg-[#1e3a5f] rounded p-2"><div className="text-[10px] text-gray-500">{x.l}</div><div className={`text-xs font-semibold ${x.v>=0?'text-emerald-400':'text-red-400'}`}>{x.v>=0?'+':''}{x.v.toFixed(1)}%</div></div>))}</div>
            <div className="bg-[#1e3a5f] rounded-lg p-2"><div className="text-[10px] text-gray-500 mb-1">Historique</div><div className="flex items-end gap-0.5 h-8">{cr.sH.map((v,i)=>(<div key={i} className="flex-1 rounded-t" style={{height:`${v}%`,backgroundColor:getSentimentStyle(v).color}}/>))}</div></div>
          </div>}
        </div>
      );
    };

    const Header = ({ isLive, time, stats }) => (
      <header className="flex flex-col lg:flex-row items-start lg:items-center justify-between mb-6 gap-4">
        <div><h1 className="text-2xl font-bold text-white">CRYPTO SENTINEL PRO</h1><div className="flex items-center gap-3 mt-1"><span className={`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${isLive?'bg-emerald-500/20 text-emerald-400':'bg-red-500/20 text-red-400'}`}><span className={`w-2 h-2 rounded-full ${isLive?'bg-emerald-400 animate-pulse':'bg-red-400'}`}/>{isLive?'LIVE':'OFFLINE'}</span><span className="text-sm text-gray-500">{time}</span></div></div>
        <div className="flex gap-1 bg-[#1e3a5f] rounded-xl p-1">{[{l:'BULL',v:stats.bull,c:'#22c55e'},{l:'NEUT',v:stats.neut,c:'#eab308'},{l:'BEAR',v:stats.bear,c:'#ef4444'}].map((s,i)=>(<div key={i} className="px-4 py-2 rounded-lg text-center" style={{backgroundColor:`${s.c}15`}}><div className="text-[10px] font-semibold" style={{color:s.c}}>{s.l}</div><div className="text-xl font-bold text-white">{s.v}</div></div>))}</div>
      </header>
    );

    const Filters = ({ filter, setFilter, search, setSearch, sort, setSort }) => (
      <div className="flex flex-col lg:flex-row items-stretch lg:items-center justify-between gap-4 mb-4 p-4 bg-[#0f2744] rounded-xl border border-[#1e3a5f]">
        <div className="relative w-full lg:w-64"><span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">üîç</span><input type="text" placeholder="Rechercher..." value={search} onChange={e=>setSearch(e.target.value)} className="w-full bg-[#1e3a5f] border border-[#2a4a6f] rounded-lg pl-10 pr-4 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-blue-500"/></div>
        <div className="flex flex-wrap gap-2">{['ALL','BULLISH','NEUTRAL','BEARISH'].map(f=>(<button key={f} onClick={()=>setFilter(f)} className={`px-4 py-2 rounded-lg text-xs font-semibold transition-all ${filter===f?'bg-blue-600 text-white':'bg-[#1e3a5f] text-gray-400 hover:text-white'}`}>{f==='ALL'?'TOUS':f}</button>))}<select value={sort} onChange={e=>setSort(e.target.value)} className="px-3 py-2 bg-[#1e3a5f] border border-[#2a4a6f] rounded-lg text-white text-xs focus:outline-none"><option value="rank">Rang</option><option value="sentiment">Sentiment ‚Üì</option><option value="change24h">24h ‚Üì</option></select></div>
      </div>
    );

    // ========== MAIN APP ==========
    function App() {
      const [isLive] = useState(true);
      const [time, setTime] = useState(new Date().toLocaleTimeString());
      const [cryptos, setCryptos] = useState(genTop50());
      const [filter, setFilter] = useState('ALL');
      const [search, setSearch] = useState('');
      const [sort, setSort] = useState('rank');
      const [showDet, setShowDet] = useState(false);
      const [fgHist] = useState(genFearGreedHistory());
      const [btcHist] = useState(genBtcHistory(fgHist));
      const fgVal = fgHist[fgHist.length-1]?.value || 26;
      const oppScore = 68, prevOpp = 62;
      const oppInd = [{name:'USDT Flow',current:72,past:65,weight:20},{name:'Market Cap',current:78,past:70,weight:25},{name:'Institutionnel',current:82,past:75,weight:25},{name:'Gold/BTC Ratio',current:58,past:52,weight:15},{name:'Sentiment Social',current:48,past:55,weight:15}];
      const stats = {bull:cryptos.filter(c=>c.sent>60).length,neut:cryptos.filter(c=>c.sent>=40&&c.sent<=60).length,bear:cryptos.filter(c=>c.sent<40).length};

      useEffect(()=>{const int=setInterval(()=>{setTime(new Date().toLocaleTimeString());setCryptos(p=>p.map(c=>({...c,price:c.price*(1+(Math.random()-0.5)*0.002),c24:c.c24+(Math.random()-0.5)*0.05,sent:Math.round(Math.max(0,Math.min(100,c.sent+(Math.random()-0.5)*0.3)))})));},CONFIG.REFRESH_RATE);return()=>clearInterval(int);},[]);

      const filtered = cryptos.filter(c=>{if(search&&!c.sym.toLowerCase().includes(search.toLowerCase())&&!c.name.toLowerCase().includes(search.toLowerCase()))return false;if(filter==='BULLISH')return c.sent>60;if(filter==='NEUTRAL')return c.sent>=40&&c.sent<=60;if(filter==='BEARISH')return c.sent<40;return true;}).sort((a,b)=>{if(sort==='sentiment')return b.sent-a.sent;if(sort==='change24h')return b.c24-a.c24;return a.id-b.id;});

      return (
        <div className="min-h-screen bg-[#0a1628] text-white p-4 md:p-6">
          <div className="max-w-7xl mx-auto">
            <Header isLive={isLive} time={time} stats={stats}/>
            <div className="mb-6"><FearGreedIndex value={fgVal} history={fgHist} btcHistory={btcHist}/></div>
            <div className="mb-6"><OpportunityIndex score={oppScore} prevScore={prevOpp} indicators={oppInd} showDetails={showDet} setShowDetails={setShowDet}/></div>
            <Filters filter={filter} setFilter={setFilter} search={search} setSearch={setSearch} sort={sort} setSort={setSort}/>
            <div className="flex justify-between mb-4 text-xs text-gray-500"><span><strong className="text-white">{filtered.length}</strong> cryptos sur 50</span><span>üí° Cliquez pour d√©tails</span></div>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4">{filtered.map(c=><CryptoCard key={c.id} crypto={c} rank={c.id}/>)}</div>
            <footer className="mt-8 pt-6 border-t border-[#1e3a5f] text-center text-xs text-gray-500"><p>CRYPTO SENTINEL PRO ‚Ä¢ Fear & Greed via Alternative.me</p></footer>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App/>, document.getElementById('root'));
  </script>
</body>
</html>
